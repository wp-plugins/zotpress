jQuery(document).ready(function(){(function(wp){var ZotpressBibButton=function(props){return wp.element.createElement(wp.blockEditor.RichTextToolbarButton,{icon:'shortcode',title:'Zotpress Shortcode',onClick:function(){console.log('zp: Zotpress bib shortcode');zpClearSearch();jQuery("#zp-ZotpressMetaBox").addClass("zp-ShortcodeBuilder").appendTo(".interface-interface-skeleton__body").find(".zp-ZotpressMetaBox-Insert-Button").text(zpTranslate.txt_insertsc);jQuery("#zp-ZotpressMetaBox").find("#zp-ZotpressMetaBox-Search-Input").focus();jQuery(".zp-ZotpressMetaBox-Insert-Button").click(function(){zpInsertShortcode(jQuery(this),props)})},isActive:props.isActive,})}
wp.richText.registerFormatType('zotpress-gutenberg/bib',{title:'Insert Zotpress Shortcode',tagName:'span',className:'zp-InText-Citation-Container',edit:ZotpressBibButton,});function zpInsertShortcode($scButton,props){var zpBiblioShortcode=window.zpGenerateShortcodeString($scButton.data("sctype"));console.log(zpBiblioShortcode);let shortcodeRichText=wp.richText.create({html:zpBiblioShortcode,});props.onChange(wp.richText.insert(props.value,shortcodeRichText,props.value.start,props.value.end,));jQuery("#zp-ZotpressMetaBox").removeClass("zp-ShortcodeBuilder").appendTo("#ZotpressMetaBox .inside").find(".zp-ZotpressMetaBox-Insert-Button").text(zpTranslate.txt_insertsc)}
jQuery("#zp-ShortcodeBuilder-Close").click(function(){jQuery("#zp-ZotpressMetaBox").removeClass("zp-ShortcodeBuilder").appendTo("#ZotpressMetaBox .inside")});function zpClearSearch(){jQuery(".zp-ZotpressMetaBox-Insert-Button").off("click");window.zpRefItems=[];jQuery("#zp-ZotpressMetaBox-List .item").remove()}})(window.wp)})
